<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmic Clicker Adventure</title>
    <style>
        :root {
            --primary-color: #6c5ce7;
            --secondary-color: #a29bfe;
            --accent-color: #fd79a8;
            --dark-color: #2d3436;
            --light-color: #f5f6fa;
            --success-color: #00b894;
            --warning-color: #fdcb6e;
            --danger-color: #d63031;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #1a1a2e;
            color: var(--light-color);
            min-height: 100vh;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(108, 92, 231, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(253, 121, 168, 0.1) 0%, transparent 20%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--primary-color);
        }

        .username {
            font-weight: bold;
            font-size: 16px;
        }

        .stats {
            display: flex;
            gap: 15px;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 8px 12px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
        }

        .stat-icon {
            color: var(--accent-color);
        }

        .main-game {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 20px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .main-game {
                grid-template-columns: 1fr;
            }
        }

        .clicker-section {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            min-height: 400px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .clicker-title {
            font-size: 24px;
            margin-bottom: 20px;
            text-align: center;
            color: var(--secondary-color);
        }

        .clicker-display {
            position: relative;
            margin: 30px 0;
        }

        .clicker-main {
            width: 200px;
            height: 200px;
            background: linear-gradient(145deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(108, 92, 231, 0.3);
            transition: transform 0.1s, box-shadow 0.3s;
            position: relative;
            overflow: hidden;
            border: 5px solid rgba(255, 255, 255, 0.1);
        }

        .clicker-main:hover {
            box-shadow: 0 15px 40px rgba(108, 92, 231, 0.4);
        }

        .clicker-main:active {
            transform: scale(0.95);
        }

        .clicker-main::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.8) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .clicker-main.active::before {
            opacity: 0.4;
            animation: ripple 0.6s linear;
        }

        @keyframes ripple {
            0% {
                transform: scale(0);
            }
            100% {
                transform: scale(1);
                opacity: 0;
            }
        }

        .clicker-value {
            font-size: 32px;
            font-weight: bold;
            color: white;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            user-select: none;
        }

        .click-effect {
            position: absolute;
            font-size: 24px;
            font-weight: bold;
            color: var(--accent-color);
            pointer-events: none;
            animation: floatUp 1s forwards;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
            opacity: 0;
        }

        @keyframes floatUp {
            0% {
                transform: translateY(0);
                opacity: 1;
            }
            100% {
                transform: translateY(-100px);
                opacity: 0;
            }
        }

        .clicker-stats {
            display: flex;
            justify-content: space-around;
            width: 100%;
            margin-top: 30px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .clicker-stat {
            text-align: center;
            background: rgba(255, 255, 255, 0.05);
            padding: 10px 15px;
            border-radius: 10px;
            min-width: 120px;
        }

        .stat-label {
            font-size: 12px;
            color: var(--secondary-color);
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 16px;
            font-weight: bold;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .upgrades-section, .boosters-section, .achievements-section {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            padding: 20px;
        }

        .section-title {
            font-size: 18px;
            margin-bottom: 15px;
            color: var(--secondary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title i {
            color: var(--accent-color);
        }

        .upgrades-list, .boosters-list, .achievements-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .upgrade-item, .booster-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: transform 0.2s, background 0.2s;
            cursor: pointer;
            border-left: 3px solid var(--primary-color);
        }

        .upgrade-item:hover, .booster-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .upgrade-item.disabled, .booster-item.disabled {
            opacity: 0.5;
            pointer-events: none;
        }

        .upgrade-info {
            flex: 1;
        }

        .upgrade-name {
            font-weight: bold;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .upgrade-description {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
        }

        .upgrade-price {
            font-weight: bold;
            color: var(--warning-color);
            min-width: 80px;
            text-align: right;
        }

        .upgrade-level {
            font-size: 12px;
            color: var(--secondary-color);
            margin-top: 3px;
        }

        .booster-item {
            border-left-color: var(--accent-color);
        }

        .booster-timer {
            font-size: 12px;
            color: var(--success-color);
            margin-top: 5px;
        }

        .achievement-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
            opacity: 0.5;
            transition: opacity 0.3s;
        }

        .achievement-item.unlocked {
            opacity: 1;
            border-left: 3px solid var(--success-color);
        }

        .achievement-icon {
            width: 40px;
            height: 40px;
            background: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .achievement-icon.unlocked {
            background: var(--success-color);
        }

        .achievement-info {
            flex: 1;
        }

        .achievement-name {
            font-weight: bold;
            margin-bottom: 3px;
        }

        .achievement-description {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
        }

        .achievement-reward {
            font-size: 12px;
            color: var(--warning-color);
            margin-top: 3px;
        }

        .prestige-section {
            margin-top: 30px;
            background: rgba(253, 121, 168, 0.1);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(253, 121, 168, 0.3);
        }

        .prestige-title {
            font-size: 20px;
            margin-bottom: 10px;
            color: var(--accent-color);
        }

        .prestige-description {
            font-size: 14px;
            margin-bottom: 15px;
            color: rgba(255, 255, 255, 0.7);
        }

        .prestige-button {
            background: linear-gradient(to right, var(--accent-color), #e84393);
            border: none;
            color: white;
            padding: 12px 25px;
            border-radius: 30px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 5px 15px rgba(253, 121, 168, 0.3);
        }

        .prestige-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(253, 121, 168, 0.4);
        }

        .prestige-button:active {
            transform: translateY(0);
        }

        .prestige-stats {
            margin-top: 15px;
            font-size: 14px;
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .prestige-stat {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .prestige-stat-value {
            font-weight: bold;
            color: var(--accent-color);
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--success-color);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transform: translateX(200%);
            transition: transform 0.3s;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: var(--danger-color);
        }

        .notification.warning {
            background: var(--warning-color);
            color: var(--dark-color);
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background-color: var(--accent-color);
            opacity: 0;
            z-index: 999;
            animation: confetti-fall 5s linear forwards;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        .particle {
            position: absolute;
            border-radius: 50%;
            pointer-events: none;
            animation: particle-fade 1s forwards;
        }

        @keyframes particle-fade {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            100% {
                transform: scale(1);
                opacity: 0;
            }
        }

        .tab-container {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            position: relative;
            color: rgba(255, 255, 255, 0.7);
        }

        .tab.active {
            color: var(--secondary-color);
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--primary-color);
            border-radius: 3px 3px 0 0;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .leaderboard {
            width: 100%;
            border-collapse: collapse;
        }

        .leaderboard th, .leaderboard td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .leaderboard th {
            color: var(--secondary-color);
            font-weight: normal;
        }

        .leaderboard tr:last-child td {
            border-bottom: none;
        }

        .leaderboard tr:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        .leaderboard .rank {
            width: 40px;
            text-align: center;
        }

        .leaderboard .user {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .leaderboard .user-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            object-fit: cover;
        }

        .leaderboard .you {
            background: rgba(108, 92, 231, 0.1);
            font-weight: bold;
        }

        .settings-option {
            margin-bottom: 15px;
        }

        .settings-option label {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.1);
            transition: .4s;
            border-radius: 24px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--primary-color);
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1001;
            align-items: center;
            justify-content: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: #1a1a2e;
            border-radius: 15px;
            padding: 25px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.5);
            font-size: 20px;
            cursor: pointer;
        }

        .modal-title {
            font-size: 22px;
            margin-bottom: 15px;
            color: var(--secondary-color);
        }

        .modal-text {
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        .modal-button {
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            border: none;
            font-weight: bold;
        }

        .modal-button.primary {
            background: var(--primary-color);
            color: white;
        }

        .modal-button.secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .shop-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            margin-bottom: 10px;
            transition: transform 0.2s;
        }

        .shop-item:hover {
            transform: translateY(-3px);
            background: rgba(255, 255, 255, 0.1);
        }

        .shop-item-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .shop-item-icon {
            width: 50px;
            height: 50px;
            background: var(--primary-color);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .shop-item-text h3 {
            margin-bottom: 5px;
        }

        .shop-item-text p {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
        }

        .shop-item-price {
            display: flex;
            align-items: center;
            gap: 5px;
            font-weight: bold;
            color: var(--warning-color);
        }

        .shop-item-button {
            background: var(--primary-color);
            border: none;
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .shop-item-button:hover {
            background: var(--secondary-color);
        }

        .shop-item-button:disabled {
            background: rgba(255, 255, 255, 0.1);
            cursor: not-allowed;
        }

        .event-banner {
            background: linear-gradient(to right, #6c5ce7, #a29bfe);
            padding: 10px 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(108, 92, 231, 0.4);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(108, 92, 231, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(108, 92, 231, 0);
            }
        }

        .event-content {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .event-icon {
            font-size: 24px;
        }

        .event-text h3 {
            margin-bottom: 3px;
        }

        .event-text p {
            font-size: 12px;
        }

        .event-timer {
            background: rgba(0, 0, 0, 0.2);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
        }

        .mini-game-container {
            margin-top: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
        }

        .mini-game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .mini-game-title {
            font-size: 16px;
            color: var(--secondary-color);
        }

        .mini-game-timer {
            font-size: 14px;
            color: var(--warning-color);
        }

        .mini-game-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .mini-game-button {
            background: var(--primary-color);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .mini-game-button:hover {
            background: var(--secondary-color);
        }

        .mini-game-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            width: 100%;
        }

        .mini-game-cell {
            aspect-ratio: 1;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background 0.2s;
        }

        .mini-game-cell:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .mini-game-cell.active {
            background: var(--accent-color);
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-color), var(--accent-color));
            border-radius: 5px;
            transition: width 0.3s;
        }

        .floating-coin {
            position: absolute;
            width: 20px;
            height: 20px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23FFD700"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.31-8.86c-1.77-.45-2.34-.94-2.34-1.67 0-.84.79-1.43 2.1-1.43 1.38 0 1.9.66 1.94 1.64h1.71c-.05-1.34-.87-2.57-2.49-2.97V5H10.9v1.69c-1.51.32-2.72 1.3-2.72 2.81 0 1.79 1.49 2.69 3.66 3.21 1.95.46 2.34 1.15 2.34 1.87 0 .53-.39 1.39-2.1 1.39-1.6 0-2.23-.72-2.32-1.64H8.04c.1 1.7 1.36 2.66 2.86 2.97V19h2.34v-1.67c1.52-.29 2.72-1.16 2.73-2.77-.01-2.2-1.9-2.96-3.66-3.42z"/></svg>');
            background-size: contain;
            animation: float-coin 3s linear forwards;
            pointer-events: none;
            z-index: 100;
            opacity: 0;
        }

        @keyframes float-coin {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        .season-pass {
            background: linear-gradient(to bottom, #2d3436, #1a1a2e);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .season-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .season-title {
            font-size: 18px;
            color: var(--accent-color);
        }

        .season-timer {
            font-size: 14px;
            color: var(--warning-color);
        }

        .season-progress {
            height: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            margin-bottom: 15px;
            overflow: hidden;
            position: relative;
        }

        .season-progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-color), var(--accent-color));
            border-radius: 15px;
            transition: width 0.3s;
        }

        .season-progress-marker {
            position: absolute;
            top: 0;
            height: 100%;
            width: 2px;
            background: rgba(255, 255, 255, 0.5);
        }

        .season-levels {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 10px;
        }

        .season-level {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            position: relative;
        }

        .season-level.locked {
            opacity: 0.5;
        }

        .season-level.unlocked {
            border: 1px solid var(--success-color);
        }

        .season-level.current {
            border: 2px solid var(--accent-color);
            box-shadow: 0 0 10px rgba(253, 121, 168, 0.3);
        }

        .season-level-number {
            font-size: 12px;
            color: var(--secondary-color);
            margin-bottom: 5px;
        }

        .season-level-reward {
            font-size: 20px;
            margin-bottom: 5px;
        }

        .season-level-claim {
            background: var(--primary-color);
            border: none;
            color: white;
            padding: 3px 8px;
            border-radius: 5px;
            font-size: 12px;
            cursor: pointer;
            margin-top: 5px;
            width: 100%;
        }

        .season-level-claim:disabled {
            background: rgba(255, 255, 255, 0.1);
            cursor: not-allowed;
        }

        .season-premium {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .season-premium-button {
            background: linear-gradient(to right, var(--warning-color), #e17055);
            border: none;
            color: var(--dark-color);
            padding: 10px 15px;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
        }

        .daily-rewards {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        .daily-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .daily-title {
            font-size: 18px;
            color: var(--secondary-color);
        }

        .daily-timer {
            font-size: 14px;
            color: var(--warning-color);
        }

        .daily-streak {
            font-size: 14px;
            margin-bottom: 15px;
            text-align: center;
        }

        .daily-streak span {
            color: var(--accent-color);
            font-weight: bold;
        }

        .daily-rewards-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
        }

        .daily-reward {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            position: relative;
        }

        .daily-reward.claimed {
            border: 1px solid var(--success-color);
        }

        .daily-reward.today {
            border: 2px solid var(--accent-color);
            box-shadow: 0 0 10px rgba(253, 121, 168, 0.3);
        }

        .daily-reward-day {
            font-size: 12px;
            color: var(--secondary-color);
            margin-bottom: 5px;
        }

        .daily-reward-amount {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .daily-reward-claim {
            background: var(--primary-color);
            border: none;
            color: white;
            padding: 3px 8px;
            border-radius: 5px;
            font-size: 12px;
            cursor: pointer;
            margin-top: 5px;
            width: 100%;
        }

        .daily-reward-claim:disabled {
            background: rgba(255, 255, 255, 0.1);
            cursor: not-allowed;
        }

        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            max-width: 200px;
            text-align: center;
        }

        .tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: rgba(0, 0, 0, 0.8) transparent transparent transparent;
        }

        @media (max-width: 600px) {
            .stats {
                display: none;
            }
            
            .clicker-main {
                width: 150px;
                height: 150px;
            }
            
            .upgrade-item, .booster-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }
            
            .upgrade-price {
                text-align: left;
                width: 100%;
                padding-top: 5px;
                border-top: 1px solid rgba(255, 255, 255, 0.1);
            }
            
            .daily-rewards-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .season-levels {
                grid-template-columns: repeat(3, 1fr);
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="user-info">
                <img id="user-avatar" class="user-avatar" src="https://via.placeholder.com/40" alt="User Avatar">
                <span id="username" class="username">Player</span>
            </div>
            <div class="stats">
                <div class="stat-item">
                    <i class="fas fa-coins stat-icon"></i>
                    <span id="coins-display">0</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-trophy stat-icon"></i>
                    <span id="prestige-display">0</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-level-up-alt stat-icon"></i>
                    <span id="level-display">1</span>
                </div>
            </div>
        </header>

        <div class="event-banner" id="event-banner" style="display: none;">
            <div class="event-content">
                <div class="event-icon">
                    <i class="fas fa-calendar-star"></i>
                </div>
                <div class="event-text">
                    <h3>Special Event</h3>
                    <p>2x coins for 24 hours!</p>
                </div>
            </div>
            <div class="event-timer" id="event-timer">23:59:59</div>
        </div>

        <div class="main-game">
            <div class="clicker-section">
                <h2 class="clicker-title">Cosmic Clicker Adventure</h2>
                
                <div class="clicker-display">
                    <div class="clicker-main" id="clicker">
                        <div class="clicker-value" id="click-value">0</div>
                    </div>
                </div>
                
                <div class="clicker-stats">
                    <div class="clicker-stat">
                        <div class="stat-label">CLICKS</div>
                        <div class="stat-value" id="total-clicks">0</div>
                    </div>
                    <div class="clicker-stat">
                        <div class="stat-label">COINS/SEC</div>
                        <div class="stat-value" id="coins-per-second">0</div>
                    </div>
                    <div class="clicker-stat">
                        <div class="stat-label">CLICK POWER</div>
                        <div class="stat-value" id="click-power">1</div>
                    </div>
                </div>
                
                <div class="mini-game-container" id="mini-game-container" style="display: none;">
                    <div class="mini-game-header">
                        <div class="mini-game-title">Bonus Game</div>
                        <div class="mini-game-timer" id="mini-game-timer">30s</div>
                    </div>
                    <div class="mini-game-content" id="mini-game-content">
                        <button class="mini-game-button" id="mini-game-start">Start Game</button>
                    </div>
                </div>
                
                <div class="season-pass">
                    <div class="season-header">
                        <div class="season-title">Season 1</div>
                        <div class="season-timer" id="season-timer">29d 23h</div>
                    </div>
                    <div class="season-progress">
                        <div class="season-progress-fill" id="season-progress" style="width: 5%;"></div>
                        <div class="season-progress-marker" style="left: 20%;"></div>
                        <div class="season-progress-marker" style="left: 40%;"></div>
                        <div class="season-progress-marker" style="left: 60%;"></div>
                        <div class="season-progress-marker" style="left: 80%;"></div>
                    </div>
                    <div class="season-levels" id="season-levels">
                        <!-- Filled by JS -->
                    </div>
                    <div class="season-premium">
                        <button class="season-premium-button">Unlock Premium Pass</button>
                    </div>
                </div>
                
                <div class="daily-rewards">
                    <div class="daily-header">
                        <div class="daily-title">Daily Rewards</div>
                        <div class="daily-timer" id="daily-timer">23h 59m</div>
                    </div>
                    <div class="daily-streak">Current streak: <span id="streak-count">0</span> days</div>
                    <div class="daily-rewards-grid" id="daily-rewards-grid">
                        <!-- Filled by JS -->
                    </div>
                </div>
                
                <div class="prestige-section">
                    <h3 class="prestige-title">Cosmic Prestige</h3>
                    <p class="prestige-description">Reset your progress to gain prestige points and unlock powerful bonuses</p>
                    <button class="prestige-button" id="prestige-button">Prestige (0)</button>
                    <div class="prestige-stats">
                        <div class="prestige-stat">
                            <div class="stat-label">MULTIPLIER</div>
                            <div class="prestige-stat-value" id="prestige-multiplier">1x</div>
                        </div>
                        <div class="prestige-stat">
                            <div class="stat-label">BONUS</div>
                            <div class="prestige-stat-value" id="prestige-bonus">0%</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="sidebar">
                <div class="tab-container">
                    <div class="tab active" data-tab="upgrades">Upgrades</div>
                    <div class="tab" data-tab="boosters">Boosters</div>
                    <div class="tab" data-tab="achievements">Achievements</div>
                    <div class="tab" data-tab="leaderboard">Leaderboard</div>
                </div>
                
                <div class="tab-content active" id="upgrades-tab">
                    <div class="upgrades-section">
                        <h3 class="section-title"><i class="fas fa-arrow-up"></i> Click Upgrades</h3>
                        <div class="upgrades-list" id="click-upgrades">
                            <!-- Filled by JS -->
                        </div>
                    </div>
                    
                    <div class="upgrades-section">
                        <h3 class="section-title"><i class="fas fa-cogs"></i> Auto Upgrades</h3>
                        <div class="upgrades-list" id="auto-upgrades">
                            <!-- Filled by JS -->
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="boosters-tab">
                    <div class="boosters-section">
                        <h3 class="section-title"><i class="fas fa-bolt"></i> Active Boosters</h3>
                        <div class="boosters-list" id="active-boosters">
                            <!-- Filled by JS -->
                        </div>
                    </div>
                    
                    <div class="boosters-section">
                        <h3 class="section-title"><i class="fas fa-gem"></i> Buy Boosters</h3>
                        <div class="boosters-list" id="available-boosters">
                            <!-- Filled by JS -->
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="achievements-tab">
                    <div class="achievements-section">
                        <h3 class="section-title"><i class="fas fa-trophy"></i> Achievements</h3>
                        <div class="achievements-list" id="achievements-list">
                            <!-- Filled by JS -->
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="leaderboard-tab">
                    <div class="achievements-section">
                        <h3 class="section-title"><i class="fas fa-crown"></i> Leaderboard</h3>
                        <table class="leaderboard" id="leaderboard">
                            <thead>
                                <tr>
                                    <th class="rank">#</th>
                                    <th>Player</th>
                                    <th>Coins</th>
                                    <th>Prestige</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Filled by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notification-text">Notification text</span>
    </div>
    
    <div class="modal" id="prestige-modal">
        <div class="modal-content">
            <button class="modal-close" id="prestige-modal-close">&times;</button>
            <h3 class="modal-title">Cosmic Prestige</h3>
            <p class="modal-text">By prestiging, you will reset your current coins, upgrades and boosters, but you will gain <strong>1 Prestige Point</strong> and unlock powerful permanent bonuses.</p>
            <p class="modal-text">Your current prestige bonus: <strong id="current-prestige-bonus">0%</strong></p>
            <p class="modal-text">After prestiging, you will gain an additional <strong id="new-prestige-bonus">1%</strong> bonus to all income.</p>
            <div class="modal-buttons">
                <button class="modal-button secondary" id="prestige-cancel">Cancel</button>
                <button class="modal-button primary" id="prestige-confirm">Prestige Now</button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="shop-modal">
        <div class="modal-content">
            <button class="modal-close" id="shop-modal-close">&times;</button>
            <h3 class="modal-title">Cosmic Shop</h3>
            <div class="shop-item">
                <div class="shop-item-info">
                    <div class="shop-item-icon">
                        <i class="fas fa-coins"></i>
                    </div>
                    <div class="shop-item-text">
                        <h3>Coin Multiplier</h3>
                        <p>Permanent 2x multiplier to all coin gains</p>
                    </div>
                </div>
                <div class="shop-item-price">
                    <i class="fas fa-gem"></i>
                    <span>100</span>
                </div>
                <button class="shop-item-button">Buy</button>
            </div>
            <div class="shop-item">
                <div class="shop-item-info">
                    <div class="shop-item-icon">
                        <i class="fas fa-user-astronaut"></i>
                    </div>
                    <div class="shop-item-text">
                        <h3>Exclusive Skin</h3>
                        <p>Unique cosmic skin for your clicker</p>
                    </div>
                </div>
                <div class="shop-item-price">
                    <i class="fas fa-gem"></i>
                    <span>50</span>
                </div>
                <button class="shop-item-button">Buy</button>
            </div>
            <div class="shop-item">
                <div class="shop-item-info">
                    <div class="shop-item-icon">
                        <i class="fas fa-rocket"></i>
                    </div>
                    <div class="shop-item-text">
                        <h3>Starter Pack</h3>
                        <p>Instant coins and boosters to get you started</p>
                    </div>
                </div>
                <div class="shop-item-price">
                    <i class="fas fa-gem"></i>
                    <span>200</span>
                </div>
                <button class="shop-item-button">Buy</button>
            </div>
        </div>
    </div>
    
    <div class="tooltip" id="tooltip"></div>

    <script>
        // Telegram Web App initialization
        const tg = window.Telegram.WebApp;
        
        // Game state
        let gameState = {
            coins: 0,
            totalClicks: 0,
            clickPower: 1,
            coinsPerSecond: 0,
            prestigePoints: 0,
            prestigeBonus: 0,
            level: 1,
            xp: 0,
            xpToNextLevel: 100,
            lastPlayed: Date.now(),
            
            // Upgrades
            upgrades: {
                clickPower: { level: 0, cost: 10, multiplier: 1.5 },
                autoClicker: { level: 0, cost: 50, multiplier: 1.8 },
                clickBonus: { level: 0, cost: 100, multiplier: 2 },
                criticalClick: { level: 0, cost: 200, multiplier: 2.2 },
                megaClick: { level: 0, cost: 500, multiplier: 2.5 }
            },
            
            // Auto producers
            producers: {
                miner: { level: 0, cost: 15, baseProduction: 0.1 },
                factory: { level: 0, cost: 100, baseProduction: 1 },
                lab: { level: 0, cost: 1100, baseProduction: 8 },
                plant: { level: 0, cost: 12000, baseProduction: 47 },
                portal: { level: 0, cost: 130000, baseProduction: 260 }
            },
            
            // Boosters
            activeBoosters: [],
            availableBoosters: [
                { id: '2xcoins', name: '2x Coins', description: 'Double your coin gain for 30 minutes', cost: 50, duration: 1800, multiplier: 2 },
                { id: 'autoclick', name: 'Auto Click', description: 'Automatically clicks for you 5 times per second for 10 minutes', cost: 75, duration: 600, clicksPerSecond: 5 },
                { id: 'luckyclick', name: 'Lucky Click', description: '25% chance for 10x coins for 15 minutes', cost: 100, duration: 900, chance: 0.25, multiplier: 10 }
            ],
            
            // Achievements
            achievements: [
                { id: 'first_click', name: 'First Click', description: 'Make your first click', reward: 10, unlocked: false },
                { id: '100_clicks', name: '100 Clicks', description: 'Reach 100 total clicks', reward: 50, unlocked: false },
                { id: '1000_coins', name: 'Coin Collector', description: 'Collect 1000 coins', reward: 100, unlocked: false },
                { id: 'first_upgrade', name: 'Upgrader', description: 'Buy your first upgrade', reward: 25, unlocked: false },
                { id: 'first_booster', name: 'Booster', description: 'Use your first booster', reward: 75, unlocked: false },
                { id: 'first_prestige', name: 'Cosmic Explorer', description: 'Prestige for the first time', reward: 200, unlocked: false }
            ],
            
            // Daily rewards
            dailyRewards: [
                { day: 1, amount: 10, claimed: false },
                { day: 2, amount: 20, claimed: false },
                { day: 3, amount: 30, claimed: false },
                { day: 4, amount: 50, claimed: false },
                { day: 5, amount: 75, claimed: false },
                { day: 6, amount: 100, claimed: false },
                { day: 7, amount: 200, claimed: false }
            ],
            currentStreak: 0,
            lastDailyReward: 0,
            
            // Season pass
            seasonLevel: 0,
            seasonXP: 0,
            seasonXPToNextLevel: 100,
            seasonRewards: [
                { level: 1, free: 50, premium: 100 },
                { level: 2, free: 75, premium: 150 },
                { level: 3, free: 100, premium: 200 },
                { level: 4, free: 150, premium: 300 },
                { level: 5, free: 200, premium: 400 },
                { level: 6, free: 300, premium: 600 },
                { level: 7, free: 400, premium: 800 },
                { level: 8, free: 500, premium: 1000 },
                { level: 9, free: 750, premium: 1500 },
                { level: 10, free: 1000, premium: 2000 }
            ],
            seasonEndTime: Date.now() + 30 * 24 * 60 * 60 * 1000, // 30 days from now
            
            // Mini game
            miniGameActive: false,
            miniGameEndTime: 0,
            miniGameScore: 0,
            
            // Event
            eventActive: false,
            eventEndTime: 0,
            eventMultiplier: 2
        };
        
        // DOM elements
        const clicker = document.getElementById('clicker');
        const clickValue = document.getElementById('click-value');
        const coinsDisplay = document.getElementById('coins-display');
        const totalClicksDisplay = document.getElementById('total-clicks');
        const coinsPerSecondDisplay = document.getElementById('coins-per-second');
        const clickPowerDisplay = document.getElementById('click-power');
        const prestigeDisplay = document.getElementById('prestige-display');
        const levelDisplay = document.getElementById('level-display');
        const prestigeButton = document.getElementById('prestige-button');
        const prestigeMultiplierDisplay = document.getElementById('prestige-multiplier');
        const prestigeBonusDisplay = document.getElementById('prestige-bonus');
        const clickUpgradesList = document.getElementById('click-upgrades');
        const autoUpgradesList = document.getElementById('auto-upgrades');
        const activeBoostersList = document.getElementById('active-boosters');
        const availableBoostersList = document.getElementById('available-boosters');
        const achievementsList = document.getElementById('achievements-list');
        const leaderboardBody = document.querySelector('#leaderboard tbody');
        const notification = document.getElementById('notification');
        const notificationText = document.getElementById('notification-text');
        const prestigeModal = document.getElementById('prestige-modal');
        const prestigeModalClose = document.getElementById('prestige-modal-close');
        const prestigeCancel = document.getElementById('prestige-cancel');
        const prestigeConfirm = document.getElementById('prestige-confirm');
        const currentPrestigeBonus = document.getElementById('current-prestige-bonus');
        const newPrestigeBonus = document.getElementById('new-prestige-bonus');
        const shopModal = document.getElementById('shop-modal');
        const shopModalClose = document.getElementById('shop-modal-close');
        const userAvatar = document.getElementById('user-avatar');
        const username = document.getElementById('username');
        const dailyRewardsGrid = document.getElementById('daily-rewards-grid');
        const streakCount = document.getElementById('streak-count');
        const dailyTimer = document.getElementById('daily-timer');
        const seasonLevels = document.getElementById('season-levels');
        const seasonProgress = document.getElementById('season-progress');
        const seasonTimer = document.getElementById('season-timer');
        const miniGameContainer = document.getElementById('mini-game-container');
        const miniGameContent = document.getElementById('mini-game-content');
        const miniGameStart = document.getElementById('mini-game-start');
        const miniGameTimer = document.getElementById('mini-game-timer');
        const eventBanner = document.getElementById('event-banner');
        const eventTimer = document.getElementById('event-timer');
        const tooltip = document.getElementById('tooltip');
        
        // Game variables
        let clickEffects = [];
        let floatingCoins = [];
        let particles = [];
        let autoClickInterval;
        let gameLoopInterval;
        let offlineProgressCalculated = false;
        
        // Initialize the game
        function initGame() {
            // Load saved game
            loadGame();
            
            // Initialize Telegram user data
            if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
                const user = tg.initDataUnsafe.user;
                username.textContent = user.first_name || 'Player';
                if (user.photo_url) {
                    userAvatar.src = user.photo_url;
                }
            }
            
            // Setup event listeners
            setupEventListeners();
            
            // Render initial game state
            renderGame();
            
            // Start game loop
            gameLoopInterval = setInterval(gameLoop, 1000);
            
            // Calculate offline progress
            if (!offlineProgressCalculated) {
                calculateOfflineProgress();
                offlineProgressCalculated = true;
            }
            
            // Check for daily reward
            checkDailyReward();
            
            // Start auto producers
            startAutoProducers();
            
            // Show welcome notification
            showNotification('Welcome to Cosmic Clicker Adventure!', 'success');
            
            // Check for achievements
            checkAchievements();
            
            // Start mini game timer
            startMiniGameTimer();
            
            // Start random events
            startRandomEvents();
        }
        
        // Setup event listeners
        function setupEventListeners() {
            // Clicker click
            clicker.addEventListener('click', handleClick);
            
            // Tab switching
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    tab.classList.add('active');
                    document.getElementById(`${tab.dataset.tab}-tab`).classList.add('active');
                });
            });
            
            // Prestige button
            prestigeButton.addEventListener('click', () => {
                currentPrestigeBonus.textContent = `${gameState.prestigeBonus}%`;
                const newBonus = Math.floor(Math.pow(gameState.prestigePoints + 1, 1.5));
                newPrestigeBonus.textContent = `${newBonus}%`;
                prestigeModal.classList.add('show');
            });
            
            // Prestige modal buttons
            prestigeModalClose.addEventListener('click', () => prestigeModal.classList.remove('show'));
            prestigeCancel.addEventListener('click', () => prestigeModal.classList.remove('show'));
            prestigeConfirm.addEventListener('click', prestige);
            
            // Shop modal
            shopModalClose.addEventListener('click', () => shopModal.classList.remove('show'));
            
            // Mini game start
            miniGameStart.addEventListener('click', startMiniGame);
            
            // Tooltip
            document.addEventListener('mousemove', (e) => {
                tooltip.style.left = `${e.clientX + 10}px`;
                tooltip.style.top = `${e.clientY + 10}px`;
            });
        }
        
        // Handle clicker click
        function handleClick() {
            // Add click effect
            createClickEffect(event.clientX, event.clientY);
            
            // Calculate coins gained
            let coinsGained = gameState.clickPower * (1 + gameState.prestigeBonus / 100);
            
            // Check for critical click
            if (Math.random() < 0.05 + (gameState.upgrades.criticalClick.level * 0.01)) {
                coinsGained *= 2 + (gameState.upgrades.criticalClick.level * 0.5);
                showClickEffect(event.clientX, event.clientY, `CRITICAL! +${formatNumber(coinsGained)}`, '#fd79a8');
            } else if (Math.random() < 0.01 && gameState.upgrades.megaClick.level > 0) {
                coinsGained *= 10;
                showClickEffect(event.clientX, event.clientY, `MEGA! +${formatNumber(coinsGained)}`, '#fdcb6e');
            } else {
                showClickEffect(event.clientX, event.clientY, `+${formatNumber(coinsGained)}`, '#a29bfe');
            }
            
            // Apply event multiplier if active
            if (gameState.eventActive) {
                coinsGained *= gameState.eventMultiplier;
            }
            
            // Add coins
            gameState.coins += coinsGained;
            gameState.totalClicks++;
            
            // Add XP
            addXP(1);
            
            // Update UI
            updateCoinsDisplay();
            updateClickStats();
            
            // Check for achievements
            checkAchievements();
            
            // Create floating coin
            createFloatingCoin(event.clientX, event.clientY);
            
            // Save game
            saveGame();
        }
        
        // Create click effect
        function createClickEffect(x, y) {
            clicker.classList.add('active');
            setTimeout(() => clicker.classList.remove('active'), 100);
            
            // Create particles
            for (let i = 0; i < 10; i++) {
                createParticle(x, y);
            }
        }
        
        // Create particle
        function createParticle(x, y) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.left = `${x}px`;
            particle.style.top = `${y}px`;
            particle.style.backgroundColor = `hsl(${Math.random() * 60 + 200}, 80%, 60%)`;
            particle.style.width = `${Math.random() * 8 + 2}px`;
            particle.style.height = particle.style.width;
            
            document.body.appendChild(particle);
            particles.push(particle);
            
            // Remove particle after animation
            setTimeout(() => {
                particle.remove();
                particles = particles.filter(p => p !== particle);
            }, 1000);
        }
        
        // Show click effect text
        function showClickEffect(x, y, text, color) {
            const effect = document.createElement('div');
            effect.className = 'click-effect';
            effect.textContent = text;
            effect.style.color = color;
            effect.style.left = `${x}px`;
            effect.style.top = `${y}px`;
            
            document.body.appendChild(effect);
            clickEffects.push(effect);
            
            // Remove effect after animation
            setTimeout(() => {
                effect.remove();
                clickEffects = clickEffects.filter(e => e !== effect);
            }, 1000);
        }
        
        // Create floating coin
        function createFloatingCoin(x, y) {
            const coin = document.createElement('div');
            coin.className = 'floating-coin';
            coin.style.left = `${x}px`;
            coin.style.top = `${y}px`;
            
            document.body.appendChild(coin);
            floatingCoins.push(coin);
            
            // Remove coin after animation
            setTimeout(() => {
                coin.remove();
                floatingCoins = floatingCoins.filter(c => c !== coin);
            }, 3000);
        }
        
        // Game loop
        function gameLoop() {
            // Update coins from auto producers
            updateAutoProducers();
            
            // Update active boosters
            updateBoosters();
            
            // Update UI
            updateCoinsDisplay();
            updateClickStats();
            
            // Update daily reward timer
            updateDailyTimer();
            
            // Update season timer
            updateSeasonTimer();
            
            // Update mini game timer if active
            if (gameState.miniGameActive) {
                updateMiniGameTimer();
            }
            
            // Update event timer if active
            if (gameState.eventActive) {
                updateEventTimer();
            }
            
            // Save game every 10 seconds
            if (Date.now() % 10000 < 1000) {
                saveGame();
            }
        }
        
        // Update auto producers
        function updateAutoProducers() {
            let production = 0;
            
            // Calculate production from all producers
            for (const [id, producer] of Object.entries(gameState.producers)) {
                production += producer.level * producer.baseProduction;
            }
            
            // Apply prestige bonus
            production *= (1 + gameState.prestigeBonus / 100);
            
            // Apply event multiplier if active
            if (gameState.eventActive) {
                production *= gameState.eventMultiplier;
            }
            
            // Add coins
            gameState.coins += production;
            gameState.coinsPerSecond = production;
            
            // Add XP
            if (production > 0) {
                addXP(production / 10);
            }
        }
        
        // Start auto producers
        function startAutoProducers() {
            if (autoClickInterval) clearInterval(autoClickInterval);
            
            // Check for auto click boosters
            const autoClickBoosters = gameState.activeBoosters.filter(b => b.clicksPerSecond);
            if (autoClickBoosters.length > 0) {
                const totalClicksPerSecond = autoClickBoosters.reduce((sum, b) => sum + b.clicksPerSecond, 0);
                autoClickInterval = setInterval(() => {
                    for (let i = 0; i < totalClicksPerSecond; i++) {
                        simulateClick();
                    }
                }, 1000);
            }
        }
        
        // Simulate a click
        function simulateClick() {
            const rect = clicker.getBoundingClientRect();
            const x = rect.left + rect.width / 2;
            const y = rect.top + rect.height / 2;
            
            // Calculate coins gained
            let coinsGained = gameState.clickPower * (1 + gameState.prestigeBonus / 100);
            
            // Check for critical click
            if (Math.random() < 0.05 + (gameState.upgrades.criticalClick.level * 0.01)) {
                coinsGained *= 2 + (gameState.upgrades.criticalClick.level * 0.5);
            } else if (Math.random() < 0.01 && gameState.upgrades.megaClick.level > 0) {
                coinsGained *= 10;
            }
            
            // Apply event multiplier if active
            if (gameState.eventActive) {
                coinsGained *= gameState.eventMultiplier;
            }
            
            // Add coins
            gameState.coins += coinsGained;
            gameState.totalClicks++;
            
            // Add XP
            addXP(1);
            
            // Create floating coin
            createFloatingCoin(x, y);
        }
        
        // Update boosters
        function updateBoosters() {
            const now = Date.now();
            gameState.activeBoosters = gameState.activeBoosters.filter(booster => {
                return booster.endTime > now;
            });
            
            // Update auto clickers if boosters changed
            startAutoProducers();
            
            // Render boosters
            renderActiveBoosters();
        }
        
        // Add XP
        function addXP(amount) {
            gameState.xp += amount;
            
            // Check for level up
            if (gameState.xp >= gameState.xpToNextLevel) {
                gameState.level++;
                gameState.xp -= gameState.xpToNextLevel;
                gameState.xpToNextLevel = Math.floor(gameState.xpToNextLevel * 1.2);
                
                // Show level up notification
                showNotification(`Level Up! Now level ${gameState.level}`, 'success');
                
                // Add season XP
                addSeasonXP(10);
            }
            
            // Update level display
            levelDisplay.textContent = gameState.level;
        }
        
        // Add season XP
        function addSeasonXP(amount) {
            if (gameState.seasonLevel >= 10) return;
            
            gameState.seasonXP += amount;
            
            // Check for season level up
            if (gameState.seasonXP >= gameState.seasonXPToNextLevel) {
                gameState.seasonLevel++;
                gameState.seasonXP -= gameState.seasonXPToNextLevel;
                gameState.seasonXPToNextLevel = Math.floor(gameState.seasonXPToNextLevel * 1.3);
                
                // Show season level up notification
                showNotification(`Season Level Up! Now level ${gameState.seasonLevel}`, 'success');
                
                // Add season reward
                gameState.coins += gameState.seasonRewards[gameState.seasonLevel - 1].free;
            }
            
            // Update season progress
            const progress = (gameState.seasonXP / gameState.seasonXPToNextLevel) * 100;
            seasonProgress.style.width = `${progress}%`;
            
            // Render season levels
            renderSeasonLevels();
        }
        
        // Buy upgrade
        function buyUpgrade(type, id) {
            const upgrade = gameState.upgrades[id] || gameState.producers[id];
            const cost = upgrade.cost * Math.pow(upgrade.multiplier || 2, upgrade.level);
            
            if (gameState.coins >= cost) {
                gameState.coins -= cost;
                upgrade.level++;
                
                // Update click power if it's a click upgrade
                if (id === 'clickPower') {
                    gameState.clickPower = 1 + upgrade.level;
                }
                
                // Show notification
                showNotification(`Upgrade purchased: ${id} level ${upgrade.level}`, 'success');
                
                // Update UI
                updateCoinsDisplay();
                renderUpgrades();
                
                // Check for achievements
                checkAchievements();
                
                // Save game
                saveGame();
                
                return true;
            } else {
                showNotification('Not enough coins!', 'error');
                return false;
            }
        }
        
        // Buy booster
        function buyBooster(id) {
            const booster = gameState.availableBoosters.find(b => b.id === id);
            
            if (gameState.coins >= booster.cost) {
                gameState.coins -= booster.cost;
                
                // Add booster to active boosters
                gameState.activeBoosters.push({
                    ...booster,
                    startTime: Date.now(),
                    endTime: Date.now() + booster.duration * 1000
                });
                
                // Start auto clickers if needed
                startAutoProducers();
                
                // Show notification
                showNotification(`Booster activated: ${booster.name}`, 'success');
                
                // Update UI
                updateCoinsDisplay();
                renderBoosters();
                
                // Check for achievements
                checkAchievements();
                
                // Save game
                saveGame();
                
                return true;
            } else {
                showNotification('Not enough coins!', 'error');
                return false;
            }
        }
        
        // Prestige
        function prestige() {
            // Calculate prestige points
            const coinsForPrestige = Math.floor(Math.log10(gameState.coins + 1));
            const upgradesForPrestige = Object.values(gameState.upgrades).reduce((sum, u) => sum + u.level, 0) +
                                      Object.values(gameState.producers).reduce((sum, p) => sum + p.level, 0);
            const totalPrestige = Math.max(1, Math.floor(coinsForPrestige + upgradesForPrestige / 10));
            
            // Update prestige points
            gameState.prestigePoints += totalPrestige;
            gameState.prestigeBonus = Math.floor(Math.pow(gameState.prestigePoints, 1.5));
            
            // Reset game state
            gameState.coins = 0;
            gameState.totalClicks = 0;
            gameState.clickPower = 1;
            gameState.coinsPerSecond = 0;
            gameState.level = 1;
            gameState.xp = 0;
            gameState.xpToNextLevel = 100;
            
            // Reset upgrades
            for (const upgrade of Object.values(gameState.upgrades)) {
                upgrade.level = 0;
            }
            
            // Reset producers
            for (const producer of Object.values(gameState.producers)) {
                producer.level = 0;
            }
            
            // Reset boosters
            gameState.activeBoosters = [];
            
            // Close modal
            prestigeModal.classList.remove('show');
            
            // Show notification
            showNotification(`Prestige complete! Gained ${totalPrestige} prestige points`, 'success');
            
            // Update UI
            renderGame();
            
            // Check for achievements
            checkAchievements();
            
            // Save game
            saveGame();
            
            // Create confetti effect
            createConfetti();
        }
        
        // Create confetti effect
        function createConfetti() {
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = `${Math.random() * 100}vw`;
                confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
                confetti.style.width = `${Math.random() * 10 + 5}px`;
                confetti.style.height = `${Math.random() * 10 + 5}px`;
                confetti.style.animationDuration = `${Math.random() * 3 + 2}s`;
                
                document.body.appendChild(confetti);
                
                // Remove confetti after animation
                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }
        }
        
        // Claim daily reward
        function claimDailyReward(dayIndex) {
            const reward = gameState.dailyRewards[dayIndex];
            
            if (!reward.claimed) {
                reward.claimed = true;
                gameState.coins += reward.amount;
                gameState.lastDailyReward = Date.now();
                
                // Update streak
                const lastClaim = new Date(gameState.lastDailyReward);
                const today = new Date();
                lastClaim.setHours(0, 0, 0, 0);
                today.setHours(0, 0, 0, 0);
                
                if ((today - lastClaim) / (1000 * 60 * 60 * 24) === 1) {
                    gameState.currentStreak++;
                } else if ((today - lastClaim) / (1000 * 60 * 60 * 24) > 1) {
                    gameState.currentStreak = 1;
                }
                
                // Show notification
                showNotification(`Daily reward claimed: ${reward.amount} coins!`, 'success');
                
                // Update UI
                updateCoinsDisplay();
                renderDailyRewards();
                
                // Save game
                saveGame();
                
                return true;
            }
            
            return false;
        }
        
        // Claim season reward
        function claimSeasonReward(levelIndex, isPremium = false) {
            const reward = gameState.seasonRewards[levelIndex];
            
            if (gameState.seasonLevel > levelIndex) {
                const amount = isPremium ? reward.premium : reward.free;
                gameState.coins += amount;
                
                // Mark as claimed (in a real game, you'd track this)
                
                // Show notification
                showNotification(`Season reward claimed: ${amount} coins!`, 'success');
                
                // Update UI
                updateCoinsDisplay();
                renderSeasonLevels();
                
                // Save game
                saveGame();
                
                return true;
            }
            
            return false;
        }
        
        // Start mini game
        function startMiniGame() {
            gameState.miniGameActive = true;
            gameState.miniGameEndTime = Date.now() + 30000; // 30 seconds
            gameState.miniGameScore = 0;
            
            // Create mini game
            createMemoryGame();
            
            // Update UI
            miniGameContainer.style.display = 'block';
            miniGameStart.style.display = 'none';
        }
        
        // Create memory game
        function createMemoryGame() {
            miniGameContent.innerHTML = '';
            
            // Create grid
            const grid = document.createElement('div');
            grid.className = 'mini-game-grid';
            
            // Create cells
            const cells = [];
            const values = [1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8];
            
            // Shuffle values
            for (let i = values.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [values[i], values[j]] = [values[j], values[i]];
            }
            
            // Create cells
            for (let i = 0; i < 16; i++) {
                const cell = document.createElement('div');
                cell.className = 'mini-game-cell';
                cell.dataset.value = values[i];
                cell.addEventListener('click', () => handleMemoryCellClick(cell));
                grid.appendChild(cell);
                cells.push(cell);
            }
            
            miniGameContent.appendChild(grid);
        }
        
        // Handle memory cell click
        function handleMemoryCellClick(cell) {
            if (cell.classList.contains('active') || !gameState.miniGameActive) return;
            
            cell.classList.add('active');
            cell.textContent = cell.dataset.value;
            
            // Check for match
            const activeCells = document.querySelectorAll('.mini-game-cell.active');
            if (activeCells.length === 2) {
                const [cell1, cell2] = activeCells;
                
                if (cell1.dataset.value === cell2.dataset.value) {
                    // Match found
                    gameState.miniGameScore += parseInt(cell1.dataset.value) * 10;
                    
                    // Remove matched cells
                    setTimeout(() => {
                        cell1.style.visibility = 'hidden';
                        cell2.style.visibility = 'hidden';
                    }, 500);
                } else {
                    // No match
                    setTimeout(() => {
                        cell1.classList.remove('active');
                        cell2.classList.remove('active');
                        cell1.textContent = '';
                        cell2.textContent = '';
                    }, 1000);
                }
            }
            
            // Check if all pairs found
            const hiddenCells = document.querySelectorAll('.mini-game-cell[style*="visibility: hidden"]');
            if (hiddenCells.length === 16) {
                endMiniGame(true);
            }
        }
        
        // End mini game
        function endMiniGame(success = false) {
            gameState.miniGameActive = false;
            
            if (success) {
                const coinsWon = gameState.miniGameScore;
                gameState.coins += coinsWon;
                
                // Show notification
                showNotification(`Mini game complete! Won ${coinsWon} coins`, 'success');
                
                // Update UI
                updateCoinsDisplay();
            }
            
            // Reset mini game UI
            miniGameContent.innerHTML = '<button class="mini-game-button" id="mini-game-start">Start Game</button>';
            miniGameStart.style.display = 'block';
            miniGameStart.addEventListener('click', startMiniGame);
            
            // Save game
            saveGame();
        }
        
        // Start random events
        function startRandomEvents() {
            // Random event every 5-15 minutes
            setTimeout(() => {
                startEvent();
                startRandomEvents();
            }, (Math.random() * 10 + 5) * 60 * 1000);
        }
        
        // Start event
        function startEvent() {
            gameState.eventActive = true;
            gameState.eventEndTime = Date.now() + 2 * 60 * 60 * 1000; // 2 hours
            
            // Show event banner
            eventBanner.style.display = 'flex';
            
            // Show notification
            showNotification('Special event started! 2x coins for 2 hours', 'success');
            
            // Update UI
            updateEventTimer();
        }
        
        // End event
        function endEvent() {
            gameState.eventActive = false;
            
            // Hide event banner
            eventBanner.style.display = 'none';
            
            // Show notification
            showNotification('Special event ended', 'warning');
        }
        
        // Update coins display
        function updateCoinsDisplay() {
            coinsDisplay.textContent = formatNumber(gameState.coins);
            clickValue.textContent = formatNumber(gameState.coins);
        }
        
        // Update click stats
        function updateClickStats() {
            totalClicksDisplay.textContent = formatNumber(gameState.totalClicks);
            coinsPerSecondDisplay.textContent = formatNumber(gameState.coinsPerSecond);
            clickPowerDisplay.textContent = formatNumber(gameState.clickPower);
        }
        
        // Update prestige display
        function updatePrestigeDisplay() {
            prestigeDisplay.textContent = gameState.prestigePoints;
            prestigeButton.textContent = `Prestige (${Math.floor(Math.log10(gameState.coins + 1))})`;
            prestigeMultiplierDisplay.textContent = `${gameState.prestigePoints + 1}x`;
            prestigeBonusDisplay.textContent = `${gameState.prestigeBonus}%`;
        }
        
        // Update daily timer
        function updateDailyTimer() {
            const now = Date.now();
            const nextDaily = new Date(gameState.lastDailyReward);
            nextDaily.setDate(nextDaily.getDate() + 1);
            nextDaily.setHours(0, 0, 0, 0);
            
            if (now >= nextDaily.getTime()) {
                dailyTimer.textContent = 'Available';
            } else {
                const diff = nextDaily.getTime() - now;
                const hours = Math.floor(diff / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                dailyTimer.textContent = `${hours}h ${minutes}m`;
            }
        }
        
        // Update season timer
        function updateSeasonTimer() {
            const diff = gameState.seasonEndTime - Date.now();
            
            if (diff <= 0) {
                seasonTimer.textContent = 'Ended';
                // In a real game, you'd start a new season here
            } else {
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                seasonTimer.textContent = `${days}d ${hours}h`;
            }
        }
        
        // Update mini game timer
        function updateMiniGameTimer() {
            const diff = gameState.miniGameEndTime - Date.now();
            
            if (diff <= 0) {
                miniGameTimer.textContent = '0s';
                endMiniGame();
            } else {
                const seconds = Math.floor(diff / 1000);
                miniGameTimer.textContent = `${seconds}s`;
            }
        }
        
        // Update event timer
        function updateEventTimer() {
            const diff = gameState.eventEndTime - Date.now();
            
            if (diff <= 0) {
                eventTimer.textContent = 'Ended';
                endEvent();
            } else {
                const hours = Math.floor(diff / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                eventTimer.textContent = `${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }
        }
        
        // Check daily reward
        function checkDailyReward() {
            const lastClaim = new Date(gameState.lastDailyReward);
            const today = new Date();
            lastClaim.setHours(0, 0, 0, 0);
            today.setHours(0, 0, 0, 0);
            
            // Reset rewards if new day
            if ((today - lastClaim) / (1000 * 60 * 60 * 24) >= 1) {
                // If streak broken (more than 1 day since last claim)
                if ((today - lastClaim) / (1000 * 60 * 60 * 24) > 1) {
                    gameState.currentStreak = 0;
                }
                
                // Reset daily rewards
                gameState.dailyRewards.forEach(reward => reward.claimed = false);
            }
            
            // Update streak display
            streakCount.textContent = gameState.currentStreak;
        }
        
        // Check achievements
        function checkAchievements() {
            let newAchievements = 0;
            
            // Check each achievement
            for (const achievement of gameState.achievements) {
                if (!achievement.unlocked) {
                    let unlocked = false;
                    
                    switch (achievement.id) {
                        case 'first_click':
                            unlocked = gameState.totalClicks > 0;
                            break;
                        case '100_clicks':
                            unlocked = gameState.totalClicks >= 100;
                            break;
                        case '1000_coins':
                            unlocked = gameState.coins >= 1000;
                            break;
                        case 'first_upgrade':
                            unlocked = Object.values(gameState.upgrades).some(u => u.level > 0) || 
                                       Object.values(gameState.producers).some(p => p.level > 0);
                            break;
                        case 'first_booster':
                            unlocked = gameState.activeBoosters.length > 0;
                            break;
                        case 'first_prestige':
                            unlocked = gameState.prestigePoints > 0;
                            break;
                    }
                    
                    if (unlocked) {
                        achievement.unlocked = true;
                        gameState.coins += achievement.reward;
                        newAchievements++;
                        
                        // Show achievement notification
                        showNotification(`Achievement unlocked: ${achievement.name}! +${achievement.reward} coins`, 'success');
                    }
                }
            }
            
            // Update achievements UI if any were unlocked
            if (newAchievements > 0) {
                renderAchievements();
                updateCoinsDisplay();
            }
        }
        
        // Calculate offline progress
        function calculateOfflineProgress() {
            const offlineTime = Date.now() - gameState.lastPlayed;
            
            // Only calculate if offline for more than 10 seconds
            if (offlineTime > 10000) {
                const offlineSeconds = Math.floor(offlineTime / 1000);
                const offlineProduction = gameState.coinsPerSecond * offlineSeconds;
                
                if (offlineProduction > 0) {
                    gameState.coins += offlineProduction;
                    
                    // Show notification
                    showNotification(`Offline progress: earned ${formatNumber(offlineProduction)} coins while away`, 'success');
                    
                    // Update UI
                    updateCoinsDisplay();
                }
            }
            
            gameState.lastPlayed = Date.now();
        }
        
        // Start mini game timer
        function startMiniGameTimer() {
            // Show mini game every 5 minutes
            setTimeout(() => {
                miniGameContainer.style.display = 'block';
                
                // Hide after 1 minute if not started
                setTimeout(() => {
                    if (!gameState.miniGameActive) {
                        miniGameContainer.style.display = 'none';
                    }
                }, 60000);
                
                // Repeat
                startMiniGameTimer();
            }, 5 * 60 * 1000);
        }
        
        // Show notification
        function showNotification(text, type = 'success') {
            notificationText.textContent = text;
            notification.className = `notification ${type} show`;
            
            // Hide after 3 seconds
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // Format number
        function formatNumber(num) {
            if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + 'M';
            } else if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            } else {
                return Math.floor(num).toString();
            }
        }
        
        // Render game
        function renderGame() {
            updateCoinsDisplay();
            updateClickStats();
            updatePrestigeDisplay();
            renderUpgrades();
            renderBoosters();
            renderAchievements();
            renderLeaderboard();
            renderDailyRewards();
            renderSeasonLevels();
        }
        
        // Render upgrades
        function renderUpgrades() {
            // Click upgrades
            clickUpgradesList.innerHTML = '';
            
            for (const [id, upgrade] of Object.entries(gameState.upgrades)) {
                const cost = upgrade.cost * Math.pow(upgrade.multiplier || 2, upgrade.level);
                const canAfford = gameState.coins >= cost;
                
                const upgradeEl = document.createElement('div');
                upgradeEl.className = `upgrade-item ${canAfford ? '' : 'disabled'}`;
                upgradeEl.innerHTML = `
                    <div class="upgrade-info">
                        <div class="upgrade-name">
                            <i class="fas fa-${id === 'clickPower' ? 'mouse-pointer' : 
                                             id === 'autoClicker' ? 'robot' : 
                                             id === 'clickBonus' ? 'star' : 
                                             id === 'criticalClick' ? 'bolt' : 'meteor'}"></i>
                            ${id.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())}
                        </div>
                        <div class="upgrade-description">
                            ${id === 'clickPower' ? 'Increases coins per click' : 
                              id === 'autoClicker' ? 'Automatically clicks for you' : 
                              id === 'clickBonus' ? 'Adds bonus coins to each click' : 
                              id === 'criticalClick' ? 'Increases chance and power of critical clicks' : 
                              'Chance for mega clicks with 10x coins'}
                        </div>
                        <div class="upgrade-level">Level ${upgrade.level}</div>
                    </div>
                    <div class="upgrade-price">${formatNumber(cost)}</div>
                `;
                
                upgradeEl.addEventListener('click', () => buyUpgrade('click', id));
                upgradeEl.addEventListener('mouseenter', (e) => showTooltip(e, `Current bonus: ${calculateUpgradeBonus(id)}`));
                upgradeEl.addEventListener('mouseleave', hideTooltip);
                
                clickUpgradesList.appendChild(upgradeEl);
            }
            
            // Auto producers
            autoUpgradesList.innerHTML = '';
            
            for (const [id, producer] of Object.entries(gameState.producers)) {
                const cost = producer.cost * Math.pow(2, producer.level);
                const canAfford = gameState.coins >= cost;
                const production = producer.level * producer.baseProduction * (1 + gameState.prestigeBonus / 100);
                
                const producerEl = document.createElement('div');
                producerEl.className = `upgrade-item ${canAfford ? '' : 'disabled'}`;
                producerEl.innerHTML = `
                    <div class="upgrade-info">
                        <div class="upgrade-name">
                            <i class="fas fa-${id === 'miner' ? 'hard-hat' : 
                                              id === 'factory' ? 'industry' : 
                                              id === 'lab' ? 'flask' : 
                                              id === 'plant' ? 'leaf' : 'door-open'}"></i>
                            ${id.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())}
                        </div>
                        <div class="upgrade-description">
                            Produces ${formatNumber(production)} coins per second
                        </div>
                        <div class="upgrade-level">Level ${producer.level}</div>
                    </div>
                    <div class="upgrade-price">${formatNumber(cost)}</div>
                `;
                
                producerEl.addEventListener('click', () => buyUpgrade('auto', id));
                producerEl.addEventListener('mouseenter', (e) => showTooltip(e, `Base production: ${producer.baseProduction} coins/sec per level`));
                producerEl.addEventListener('mouseleave', hideTooltip);
                
                autoUpgradesList.appendChild(producerEl);
            }
        }
        
        // Calculate upgrade bonus
        function calculateUpgradeBonus(id) {
            const upgrade = gameState.upgrades[id];
            
            switch (id) {
                case 'clickPower':
                    return `${upgrade.level} → ${upgrade.level + 1} coins per click`;
                case 'autoClicker':
                    return `${upgrade.level * 0.1} → ${(upgrade.level + 1) * 0.1} auto clicks per second`;
                case 'clickBonus':
                    return `${upgrade.level * 0.5} → ${(upgrade.level + 1) * 0.5} bonus coins per click`;
                case 'criticalClick':
                    return `${5 + upgrade.level}% → ${5 + upgrade.level + 1}% chance, ${2 + upgrade.level * 0.5}x → ${2 + (upgrade.level + 1) * 0.5}x power`;
                case 'megaClick':
                    return upgrade.level === 0 ? 'Unlocks 1% chance for 10x coins' : `${1 + upgrade.level * 0.5}% → ${1 + (upgrade.level + 1) * 0.5}% chance`;
                default:
                    return '';
            }
        }
        
        // Render boosters
        function renderBoosters() {
            // Active boosters
            activeBoostersList.innerHTML = '';
            
            if (gameState.activeBoosters.length === 0) {
                activeBoostersList.innerHTML = '<div class="upgrade-item">No active boosters</div>';
            } else {
                for (const booster of gameState.activeBoosters) {
                    const timeLeft = Math.ceil((booster.endTime - Date.now()) / 1000);
                    
                    const boosterEl = document.createElement('div');
                    boosterEl.className = 'booster-item';
                    boosterEl.innerHTML = `
                        <div class="upgrade-info">
                            <div class="upgrade-name">
                                <i class="fas fa-${booster.id === '2xcoins' ? 'coins' : 
                                                   booster.id === 'autoclick' ? 'robot' : 'dice'}"></i>
                                ${booster.name}
                            </div>
                            <div class="upgrade-description">${booster.description}</div>
                            <div class="booster-timer">${formatTime(timeLeft)} remaining</div>
                        </div>
                    `;
                    
                    activeBoostersList.appendChild(boosterEl);
                }
            }
            
            // Available boosters
            availableBoostersList.innerHTML = '';
            
            for (const booster of gameState.availableBoosters) {
                const canAfford = gameState.coins >= booster.cost;
                
                const boosterEl = document.createElement('div');
                boosterEl.className = `booster-item ${canAfford ? '' : 'disabled'}`;
                boosterEl.innerHTML = `
                    <div class="upgrade-info">
                        <div class="upgrade-name">
                            <i class="fas fa-${booster.id === '2xcoins' ? 'coins' : 
                                               booster.id === 'autoclick' ? 'robot' : 'dice'}"></i>
                            ${booster.name}
                        </div>
                        <div class="upgrade-description">${booster.description}</div>
                    </div>
                    <div class="upgrade-price">${formatNumber(booster.cost)}</div>
                `;
                
                boosterEl.addEventListener('click', () => buyBooster(booster.id));
                availableBoostersList.appendChild(boosterEl);
            }
        }
        
        // Render achievements
        function renderAchievements() {
            achievementsList.innerHTML = '';
            
            for (const achievement of gameState.achievements) {
                const achievementEl = document.createElement('div');
                achievementEl.className = `achievement-item ${achievement.unlocked ? 'unlocked' : ''}`;
                achievementEl.innerHTML = `
                    <div class="achievement-icon ${achievement.unlocked ? 'unlocked' : ''}">
                        <i class="fas fa-${achievement.unlocked ? 'trophy' : 'lock'}"></i>
                    </div>
                    <div class="achievement-info">
                        <div class="achievement-name">${achievement.name}</div>
                        <div class="achievement-description">${achievement.description}</div>
                        <div class="achievement-reward">Reward: ${achievement.reward} coins</div>
                    </div>
                `;
                
                achievementsList.appendChild(achievementEl);
            }
        }
        
        // Render leaderboard
        function renderLeaderboard() {
            // In a real game, this would fetch from a server
            // For demo, we'll create fake data
            const fakePlayers = [
                { id: 1, name: 'CosmicMaster', avatar: 'https://via.placeholder.com/30', coins: 9876543, prestige: 15 },
                { id: 2, name: 'ClickerPro', avatar: 'https://via.placeholder.com/30', coins: 5432100, prestige: 10 },
                { id: 3, name: 'IdleKing', avatar: 'https://via.placeholder.com/30', coins: 3210987, prestige: 8 },
                { id: 4, name: 'PrestigeLegend', avatar: 'https://via.placeholder.com/30', coins: 2109876, prestige: 7 },
                { id: 5, name: 'Player', avatar: userAvatar.src, coins: Math.floor(gameState.coins), prestige: gameState.prestigePoints }
            ];
            
            // Sort by coins
            fakePlayers.sort((a, b) => b.coins - a.coins);
            
            leaderboardBody.innerHTML = '';
            
            fakePlayers.forEach((player, index) => {
                const isYou = player.name === 'Player';
                const row = document.createElement('tr');
                row.className = isYou ? 'you' : '';
                row.innerHTML = `
                    <td class="rank">${index + 1}</td>
                    <td class="user">
                        <img class="user-avatar" src="${player.avatar}" alt="${player.name}">
                        ${player.name}
                    </td>
                    <td>${formatNumber(player.coins)}</td>
                    <td>${player.prestige}</td>
                `;
                
                leaderboardBody.appendChild(row);
            });
        }
        
        // Render daily rewards
        function renderDailyRewards() {
            dailyRewardsGrid.innerHTML = '';
            
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const lastClaim = new Date(gameState.lastDailyReward);
            lastClaim.setHours(0, 0, 0, 0);
            const isNewDay = (today - lastClaim) / (1000 * 60 * 60 * 24) >= 1;
            
            gameState.dailyRewards.forEach((reward, index) => {
                const isToday = index === gameState.currentStreak % 7;
                const canClaim = isToday && (isNewDay || !reward.claimed);
                
                const rewardEl = document.createElement('div');
                rewardEl.className = `daily-reward ${reward.claimed ? 'claimed' : ''} ${isToday ? 'today' : ''}`;
                rewardEl.innerHTML = `
                    <div class="daily-reward-day">Day ${reward.day}</div>
                    <div class="daily-reward-amount">${formatNumber(reward.amount)}</div>
                    <button class="daily-reward-claim" ${canClaim ? '' : 'disabled'}>
                        ${reward.claimed ? 'Claimed' : isToday ? 'Claim' : ''}
                    </button>
                `;
                
                if (canClaim) {
                    rewardEl.querySelector('button').addEventListener('click', () => claimDailyReward(index));
                }
                
                dailyRewardsGrid.appendChild(rewardEl);
            });
            
            streakCount.textContent = gameState.currentStreak;
        }
        
        // Render season levels
        function renderSeasonLevels() {
            seasonLevels.innerHTML = '';
            
            for (let i = 0; i < gameState.seasonRewards.length; i++) {
                const reward = gameState.seasonRewards[i];
                const isCurrent = gameState.seasonLevel === i;
                const isUnlocked = gameState.seasonLevel > i;
                const isLocked = gameState.seasonLevel < i;
                
                const levelEl = document.createElement('div');
                levelEl.className = `season-level ${isLocked ? 'locked' : ''} ${isUnlocked ? 'unlocked' : ''} ${isCurrent ? 'current' : ''}`;
                levelEl.innerHTML = `
                    <div class="season-level-number">Level ${i + 1}</div>
                    <div class="season-level-reward">
                        <i class="fas fa-coins"></i> ${formatNumber(reward.free)}
                    </div>
                    <button class="season-level-claim" ${isUnlocked ? '' : 'disabled'}>
                        ${isUnlocked ? 'Claim' : isCurrent ? 'In Progress' : 'Locked'}
                    </button>
                `;
                
                if (isUnlocked) {
                    levelEl.querySelector('button').addEventListener('click', () => claimSeasonReward(i));
                }
                
                seasonLevels.appendChild(levelEl);
            }
            
            // Update progress
            const progress = (gameState.seasonXP / gameState.seasonXPToNextLevel) * 100;
            seasonProgress.style.width = `${progress}%`;
        }
        
        // Show tooltip
        function showTooltip(event, text) {
            tooltip.textContent = text;
            tooltip.style.opacity = '1';
        }
        
        // Hide tooltip
        function hideTooltip() {
            tooltip.style.opacity = '0';
        }
        
        // Format time
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins}m ${secs}s`;
        }
        
        // Save game
        function saveGame() {
            gameState.lastPlayed = Date.now();
            localStorage.setItem('cosmicClickerSave', JSON.stringify(gameState));
        }
        
        // Load game
        function loadGame() {
            const savedGame = localStorage.getItem('cosmicClickerSave');
            if (savedGame) {
                const parsed = JSON.parse(savedGame);
                
                // Merge with default game state
                gameState = {
                    ...gameState,
                    ...parsed,
                    // Preserve some default values if not in save
                    upgrades: {
                        ...gameState.upgrades,
                        ...(parsed.upgrades || {})
                    },
                    producers: {
                        ...gameState.producers,
                        ...(parsed.producers || {})
                    },
                    availableBoosters: gameState.availableBoosters, // Don't overwrite
                    achievements: gameState.achievements.map(a => {
                        const saved = (parsed.achievements || []).find(sa => sa.id === a.id);
                        return saved ? { ...a, ...saved } : a;
                    }),
                    dailyRewards: parsed.dailyRewards || gameState.dailyRewards
                };
                
                // Calculate current click power
                gameState.clickPower = 1 + (gameState.upgrades.clickPower.level || 0);
            }
        }
        
        // Initialize the game when DOM is loaded
        document.addEventListener('DOMContentLoaded', initGame);
        
        // Save game before page unload
        window.addEventListener('beforeunload', saveGame);
    </script>
</body>
</html>